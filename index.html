<!DOCTYPE html>
<html>
<body>
<script src="phonegap.js"></script>
<script>

        // onSuccess Callback
        //
        function onSuccess() {
            console.log("playAudio():Audio Success");
        }

        // onError Callback 
        //
        function onError(error) {
            alert('code: '    + error.code    + '\n' + 
                  'message: ' + error.message + '\n');
        }


        // Audio player
        //
        var my_media = null;
	var playing = false;

        // Play audio
        //
        function playAudio(src) {
            if (my_media == null) {
                // Create Media object from src
                my_media = new Media(src, onSuccess, onError);
            } // else play current audio
		if (playing) {
			stopAudio();
		}
            // Play audio
            my_media.play();
		playing = true;
        }

        // Stop audio
        // 
        function stopAudio() {
            if (my_media) {
		if (playing) {
			my_media.stop();
			playing = false;
		}
            }
        }


function add(text, pic, snd)
{
	var canvas = document.createElement('canvas');
	canvas.onclick = function() { playAudio(snd); };
	var ctx=canvas.getContext("2d");
	var img = document.createElement('img');
	img.src = pic;
	ctx.font="20px Georgia";
	var fontsize=ctx.measureText('Mg').width;
	canvas.width = img.width + 5;
	canvas.height = img.height + fontsize + 2;
	ctx.drawImage(img, 0, 0);
	ctx.font="20px Georgia";
	ctx.textAlign = 'center';
	ctx.fillText(text, canvas.width/2, img.height + (fontsize/2) + 2);
	document.body.appendChild(canvas);
}

add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");
add("I want to go home.", "8.jpg", "8.mp3");

</script>
</body>
</html>
