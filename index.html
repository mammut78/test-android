<!DOCTYPE html>
<html>
<script src="phonegap.js"></script>
<script>
        // onSuccess Callback
        //
        function onSuccess() {
            //console.log("playAudio():Audio Success");
		alert("success");
        }

        // onError Callback 
        //
        function onError(error) {
            alert('code: '    + error.code    + '\n' + 
                  'message: ' + error.message + '\n');
        }


        // Audio player
        //
        var my_media = null;
	var playing = false;

	function onStatus(stat) {
		if (stat == Media.MEDIA_STOPPED) {
			playing = false;
		} else {
			playing = true;
		}
	}

        // Play audio
        //
        function playAudio(src) {
		if (my_media) {
			if (playing) {
				my_media.stop();
			}
			my_media.release();
			my_media = null;
		}
		if (my_media == null) {
			// Create Media object from src
			alert("will play: "+src);
			my_media = new Media(src, onSuccess, onError);
		}
		// Play audio
		my_media.play();
        }

function add(text, pic, snd)
{
	var canvas = document.createElement('canvas');
	canvas.onclick = function() { playAudio(snd); };
	var ctx=canvas.getContext("2d");
	var img = document.createElement('img');
	img.src = pic;
	ctx.font="20px Georgia";
	var fontsize=ctx.measureText('Mg').width;
	canvas.width = img.width + 5;
	canvas.height = img.height + fontsize + 2;
	ctx.drawImage(img, 0, 0);
	ctx.font="20px Georgia";
	ctx.textAlign = 'center';
	ctx.fillText(text, canvas.width/2, img.height + (fontsize/2) + 2);
	document.body.appendChild(canvas);
}

function onDeviceReady() {
	document.body.innerHTML = "";
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
	add("I want to go home.", "library/1/8.jpg", "/android_asset/www/library/1/8.mp3");
}

	// Wait for Cordova to load
	//
	document.addEventListener("deviceready", onDeviceReady, false);

</script>
<body>
<a href="#" class="btn_large" onclick="onDeviceReady();">Start</a>
</body>
</html>
